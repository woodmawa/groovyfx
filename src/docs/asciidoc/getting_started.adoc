= Getting Started with GroovyFX
:toc:
:toclevels: 3
:icons: font

GroovyFX is a Groovy-based DSL and framework for building JavaFX applications.
This guide explains how to create, build, and run GroovyFX applications on
modern Java versions using Gradle and IntelliJ IDEA.

This document reflects the current GroovyFX setup using:

* Groovy 5
* JavaFX 25
* Java 21+ (tested with Java 25)
* Gradle 8/9+

== Prerequisites

* A recent JDK (Java 21 or newer recommended)
* Gradle (or use the Gradle Wrapper)
* IntelliJ IDEA (recommended IDE for GroovyFX development)

NOTE: JavaFX is no longer bundled with the JDK. It must be added explicitly as a dependency.

---

== Creating a GroovyFX Project with Gradle

The recommended way to use GroovyFX is via Gradle.

[source,groovy]
----
plugins {
    id 'groovy'
    id 'application'
    id 'org.openjfx.javafxplugin' version '0.1.0'
}

repositories {
    mavenCentral()
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(25) // 21+ also supported
    }
}

dependencies {
    // Keep Groovy modules aligned
    implementation platform("org.apache.groovy:groovy-bom:5.0.3")
    implementation "org.apache.groovy:groovy"

    implementation "org.groovyfx:groovyfx-ng:<VERSION>"
}

javafx {
    version = "25.0.1"
    modules = [
        'javafx.base',
        'javafx.graphics',
        'javafx.controls',
        'javafx.fxml',
        'javafx.web',
        'javafx.media',
        'javafx.swing'
    ]
}

application {
    // Replace with your application's main class
    mainClass = "com.example.Main"
}

// Required on Java 21+ because JavaFX loads native libraries
tasks.withType(JavaExec).configureEach {
    jvmArgs += [ "--enable-native-access=ALL-UNNAMED" ]
}
----

With this setup you can run your application using:

----
./gradlew run
----

---

== Writing a GroovyFX Application

A GroovyFX application is written as a normal Groovy class.
Groovy scripts are compiled to JVM classes and executed like Java applications.

[source,groovy]
----
package com.example

import groovyx.javafx.GroovyFX

class Main {
    static void main(String[] args) {
        GroovyFX.start {
            stage(title: 'Hello GroovyFX', visible: true) {
                scene {
                    label("Hello GroovyFX!")
                }
            }
        }
    }
}
----

---

== Running GroovyFX Applications

=== Recommended: Run via Gradle

Running via Gradle ensures:
* correct Groovy + JavaFX classpath
* correct JVM arguments
* consistent behavior across IDE and CI

----
./gradlew run
----

---

=== Using IntelliJ IDEA

==== Importing the project

* Open IntelliJ IDEA
* *File → Open…* → select the project directory
* Import as a *Gradle* project
* Use the Gradle wrapper when prompted

==== Configure IntelliJ to use Gradle

This avoids classpath mismatches.

*Settings → Build, Execution, Deployment → Build Tools → Gradle*

* *Build and run using:* Gradle
* *Run tests using:* Gradle
* *Gradle JVM:* your JDK (21+ / 25)

Reload the Gradle project after changing these settings.

---

=== Running your application from IntelliJ

IMPORTANT: Do **not** run JavaFX applications using IntelliJ’s
“Groovy Script” runner (right-click `.groovy` → Run).
That mode often lacks the correct JavaFX and Groovy runtime configuration.

Instead, use one of the following.

==== Option 1: Run using a Gradle task (recommended)

* Open the *Gradle* tool window
* Run the appropriate task (`run`, or demo tasks if provided)
* Optionally create a Run Configuration from the Gradle task

This is the most reliable approach.

==== Option 2: Application Run Configuration

You may also run the compiled class directly.

*Run → Edit Configurations… → + → Application*

* *Main class:* your compiled class
(e.g. `com.example.Main`)
* *Use classpath of module:* your main module
* *JRE:* Project SDK
* *VM options:*
----
--enable-native-access=ALL-UNNAMED
----

This runs the compiled Groovy class and avoids the Groovy Script runner entirely.

---

== JavaFX Warnings on Modern JDKs

=== Native access warning (Java 21+)

JavaFX loads native libraries and may trigger warnings on modern JDKs.
This is expected.

Add the following JVM option when running applications:

----
--enable-native-access=ALL-UNNAMED
----

---

=== JavaFX “unnamed module” warning

When running JavaFX on the classpath you may see:

----
Unsupported JavaFX configuration: classes were loaded from 'unnamed module ...'
----

This warning is harmless and does not affect application behavior.

If you wish to suppress it in IntelliJ runs, you can configure logging.

==== Optional: suppress JavaFX startup noise

1. Create a file at:
----
config/logging.properties
----

2. Contents:
----
handlers= java.util.logging.ConsoleHandler
.level= INFO

com.sun.javafx.application.PlatformImpl.level = OFF
javafx.level = OFF
----

3. Add this JVM option to your run configuration:
----
-Djava.util.logging.config.file=./config/logging.properties
----

---

== Notes for the GroovyFX Repository

The GroovyFX repository itself contains additional source sets:

* `ast` – AST transformations (e.g. `@FXBindable`)
* `demo` – example applications

To run repository demos:

* Use the provided Gradle tasks (recommended), or
* Create an IntelliJ *Application* run configuration using:
* Main class: `examples.ModernDashboard` (or similar)
* Classpath module: `groovyfx.demo`
* VM option: `--enable-native-access=ALL-UNNAMED`

---

== Summary

* Use Gradle to build and run GroovyFX applications
* Run compiled classes, not Groovy scripts
* Add native-access JVM options on Java 21+
* Ignore or suppress benign JavaFX warnings if desired

Following these guidelines avoids the most common issues when using GroovyFX
on modern Java platforms.
